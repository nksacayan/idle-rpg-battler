[gd_scene load_steps=37 format=3 uid="uid://bb23gwiqd5wsn"]

[ext_resource type="Script" uid="uid://bqektdm713py3" path="res://scenes/battle/battle_main.gd" id="1_suw5k"]
[ext_resource type="Script" uid="uid://cppn1dvuqyerv" path="res://character/character_data.gd" id="2_7xoa7"]
[ext_resource type="Script" uid="uid://b8ss3h6h6wtx7" path="res://scenes/battle/team_container.gd" id="2_hj4f6"]
[ext_resource type="PackedScene" uid="uid://b7v8y31r24dpk" path="res://character/user_interface/battle/character_battle_card.tscn" id="3_0jypa"]
[ext_resource type="Script" uid="uid://0s5eonlhsruj" path="res://nks-common-godot/rpg_stats/leveled_stat.gd" id="3_ai12c"]
[ext_resource type="Script" uid="uid://c1uli2rvae5ek" path="res://character/battle/commands/battle_command.gd" id="3_qdqkm"]
[ext_resource type="Resource" uid="uid://cy3uulpuo2sfk" path="res://character/battle/commands/basic_attack.tres" id="4_7m3k1"]
[ext_resource type="Script" uid="uid://dvbyw3d3f1mb" path="res://nks-common-godot/utils/clamped_int.gd" id="4_qdqkm"]
[ext_resource type="Script" uid="uid://brdnr7vmom15r" path="res://scenes/battle/command_container.gd" id="9_7m3k1"]
[ext_resource type="PackedScene" uid="uid://532oxsj04ur" path="res://scenes/battle/command_button_template.tscn" id="10_2qgjh"]

[sub_resource type="Resource" id="Resource_7xoa7"]
script = ExtResource("4_qdqkm")
_min_value = 1
value = 1

[sub_resource type="Resource" id="Resource_ai12c"]
script = ExtResource("3_ai12c")
_stat_name = "STRENGTH"
stat_value = SubResource("Resource_7xoa7")

[sub_resource type="Resource" id="Resource_qdqkm"]
script = ExtResource("4_qdqkm")
_min_value = 1
value = 3

[sub_resource type="Resource" id="Resource_7m3k1"]
script = ExtResource("3_ai12c")
_stat_name = "DEXTERITY"
stat_value = SubResource("Resource_qdqkm")

[sub_resource type="Resource" id="Resource_2qgjh"]
script = ExtResource("4_qdqkm")
_min_value = 1
value = 1

[sub_resource type="Resource" id="Resource_r2jbg"]
script = ExtResource("3_ai12c")
_stat_name = "CONSTITUTION"
stat_value = SubResource("Resource_2qgjh")

[sub_resource type="Resource" id="Resource_8ybqe"]
script = ExtResource("4_qdqkm")
_min_value = 1
value = 1

[sub_resource type="Resource" id="Resource_2vttj"]
script = ExtResource("3_ai12c")
_stat_name = "WISDOM"
stat_value = SubResource("Resource_8ybqe")

[sub_resource type="Resource" id="Resource_bdfxc"]
script = ExtResource("4_qdqkm")
_min_value = 1
value = 1

[sub_resource type="Resource" id="Resource_ppvt3"]
script = ExtResource("3_ai12c")
_stat_name = "INTELLIGENCE"
stat_value = SubResource("Resource_bdfxc")

[sub_resource type="Resource" id="Resource_hht2y"]
script = ExtResource("4_qdqkm")
_min_value = 1
value = 1

[sub_resource type="Resource" id="Resource_66wd1"]
script = ExtResource("3_ai12c")
_stat_name = "CHARISMA"
stat_value = SubResource("Resource_hht2y")

[sub_resource type="Resource" id="Resource_wjqm4"]
script = ExtResource("2_7xoa7")
character_name = "Test Ally"
stats = Dictionary[int, ExtResource("3_ai12c")]({
0: SubResource("Resource_ai12c"),
1: SubResource("Resource_7m3k1"),
2: SubResource("Resource_r2jbg"),
3: SubResource("Resource_2vttj"),
4: SubResource("Resource_ppvt3"),
5: SubResource("Resource_66wd1")
})
battle_commands = Array[ExtResource("3_qdqkm")]([ExtResource("4_7m3k1")])
metadata/_custom_type_script = "uid://cppn1dvuqyerv"

[sub_resource type="Resource" id="Resource_x5hi8"]
script = ExtResource("4_qdqkm")
_min_value = 1
value = 1

[sub_resource type="Resource" id="Resource_7rq38"]
script = ExtResource("3_ai12c")
_stat_name = "STRENGTH"
stat_value = SubResource("Resource_x5hi8")

[sub_resource type="Resource" id="Resource_60ip8"]
script = ExtResource("4_qdqkm")
_min_value = 1
value = 1

[sub_resource type="Resource" id="Resource_45aqn"]
script = ExtResource("3_ai12c")
_stat_name = "DEXTERITY"
stat_value = SubResource("Resource_60ip8")

[sub_resource type="Resource" id="Resource_wvp2u"]
script = ExtResource("4_qdqkm")
_min_value = 1
value = 1

[sub_resource type="Resource" id="Resource_ju840"]
script = ExtResource("3_ai12c")
_stat_name = "CONSTITUTION"
stat_value = SubResource("Resource_wvp2u")

[sub_resource type="Resource" id="Resource_3dode"]
script = ExtResource("4_qdqkm")
_min_value = 1
value = 1

[sub_resource type="Resource" id="Resource_7qa0q"]
script = ExtResource("3_ai12c")
_stat_name = "WISDOM"
stat_value = SubResource("Resource_3dode")

[sub_resource type="Resource" id="Resource_p2md1"]
script = ExtResource("4_qdqkm")
_min_value = 1
value = 1

[sub_resource type="Resource" id="Resource_7ybdm"]
script = ExtResource("3_ai12c")
_stat_name = "INTELLIGENCE"
stat_value = SubResource("Resource_p2md1")

[sub_resource type="Resource" id="Resource_s7s4x"]
script = ExtResource("4_qdqkm")
_min_value = 1
value = 1

[sub_resource type="Resource" id="Resource_42s2f"]
script = ExtResource("3_ai12c")
_stat_name = "CHARISMA"
stat_value = SubResource("Resource_s7s4x")

[sub_resource type="Resource" id="Resource_1t5bg"]
script = ExtResource("2_7xoa7")
character_name = "Test Enemy"
stats = Dictionary[int, ExtResource("3_ai12c")]({
0: SubResource("Resource_7rq38"),
1: SubResource("Resource_45aqn"),
2: SubResource("Resource_ju840"),
3: SubResource("Resource_7qa0q"),
4: SubResource("Resource_7ybdm"),
5: SubResource("Resource_42s2f")
})
battle_commands = null
metadata/_custom_type_script = "uid://cppn1dvuqyerv"

[node name="BattleMain" type="Node"]
script = ExtResource("1_suw5k")
ally_team = Array[ExtResource("2_7xoa7")]([SubResource("Resource_wjqm4")])
enemy_team = Array[ExtResource("2_7xoa7")]([SubResource("Resource_1t5bg")])

[node name="PanelContainer" type="PanelContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="VBoxContainer" type="VBoxContainer" parent="PanelContainer"]
layout_mode = 2

[node name="EnemyTeamContainer" type="HBoxContainer" parent="PanelContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 3
script = ExtResource("2_hj4f6")
character_battle_card = ExtResource("3_0jypa")

[node name="AllyTeamContainer" type="HBoxContainer" parent="PanelContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 3
script = ExtResource("2_hj4f6")
character_battle_card = ExtResource("3_0jypa")

[node name="MenuContainer" type="PanelContainer" parent="PanelContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="VBoxContainer" type="VBoxContainer" parent="PanelContainer/VBoxContainer/MenuContainer"]
layout_mode = 2

[node name="ScrollContainer" type="ScrollContainer" parent="PanelContainer/VBoxContainer/MenuContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="CommandContainer" type="GridContainer" parent="PanelContainer/VBoxContainer/MenuContainer/VBoxContainer/ScrollContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
columns = 2
script = ExtResource("9_7m3k1")
command_button_template = ExtResource("10_2qgjh")

[node name="SubmitCommandsButton" type="Button" parent="PanelContainer/VBoxContainer/MenuContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 8
text = "Submit Commands"

[connection signal="pressed" from="PanelContainer/VBoxContainer/MenuContainer/VBoxContainer/SubmitCommandsButton" to="." method="_on_submit_commands_button_pressed"]
